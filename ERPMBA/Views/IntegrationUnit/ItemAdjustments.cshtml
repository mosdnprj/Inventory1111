@model ERPMBA.Models.ItemAdjustments

@{
    ViewBag.Title = "ItemAdjustments";
}
@Html.Partial("ItemAdmin")
<div style="float:left; width:60%;height:100%;padding-top:40px;padding-left:0px;">
    <div id="Address" style="width:100%;height:525px;">


        <form name="contactForm" method="post" action="" class="in-line" role="form">


            <h3> New Adjustment</h3>
            <hr />
            <table>
                <tr>
                    <td>
                        Mode of Adjustment
                    </td>

                    <td>
                        <div class="input-group">


                            <input type="radio" name="Type" value="qunatity" />Quantity Adjustment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="Type" value="Value" />Value Adjustment



                        </div>
                    </td>

                </tr>
                <tr>
                    <td>Reference</td>

                    <td>
                        <input type=text name=textnames id="textname" class="form-control">
                    </td>

                </tr>
                <tr>
                    <td>
                        Date
                    </td>

                    <td>
                        <input type="date" name="dbthy" value="DD-MM-YYYY" style="width:285px;height:35px" class="form-control">
                    </td>
                </tr>
                <tr>
                    <td>Account</td>

                    <td>
                        <select name="unit" style="width:285px;height:35px" class="form-control">
                            <option>Cost of Goods Sold</option>
                            <option></option>
                            <option></option>
                            <option></option>
                            <option></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Reason</td>

                    <td>
                        <select name="unit" style="width:285px;height:35px" class="form-control">
                            <option>Choose or Type or Add</option>
                            <option></option>
                            <option></option>
                            <option></option>
                            <option></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Description
                    </td>

                    <td>
                        <textarea rows="5" cols="35" class="form-control"> </textarea>
                    </td>
                </tr>
            </table>
        </form>
        <h4>Item Details</h4>
        <hr />
        <div ng-app="myapp" ng-controller="ListController">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">

                        <div class="panel-body">
                            <form ng-submit="addNew()">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" /></th>
                                            <th>Item Details</th>
                                            <th>Quantity</th>
                                            <th>New Quantity On Hand</th>
                                            <th>Quantity Adjusted</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="personalDetail in personalDetails">
                                            <td>
                                                <input type="checkbox" ng-model="personalDetail.selected" />
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" ng-model="personalDetail.itemdetail" required />
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" ng-model="personalDetail.quantity" required />
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" ng-model="personalDetail.newquantity" required />
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" ng-model="personalDetail.quantityadj" required />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="form-group">
                                    <input ng-hide="!personalDetails.length" type="button" class="btn btn-danger pull-right" ng-click="remove()" value="Remove">
                                    <input type="submit" class="btn btn-primary addnew pull-right" value="Add New">
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        <script>
var app = angular.module("myapp", []);
	app.controller("ListController", ['$scope', function($scope) {
	    $scope.personalDetails = [
	        {
	            'itemdetail': '',
	            'quantity': '',
	            'newquantity': '',
	            'quantityadj': ''
	        },
	        {
	            'itemdetail': '',
	            'quantity': '',
	            'newquantity': '',
	            'quantityadj': ''
	        },
	        {
	            'itemdetail': '',
	            'quantity': '',
	            'newquantity': '',
	            'quantityadj': ''
	        }];

	        $scope.addNew = function(personalDetails){
	            $scope.personalDetails.push({
	                'itemdetail': " ",
	                'quantity': " ",
	                'newquantity': " ",
	                'quantityadj': " ",
	            });
	            $scope.PD = {};
	        };

	        $scope.remove = function(){
	            var newDataList=[];
	            $scope.selectedAll = false;
	            angular.forEach($scope.personalDetails, function(selected){
	                if(!selected.selected){
	                    newDataList.push(selected);
	                }
	            });
	            $scope.personalDetails = newDataList;
	        };

	        $scope.checkAll = function () {
	            if (!$scope.selectedAll) {
	                $scope.selectedAll = true;
	            } else {
	                $scope.selectedAll = false;
	            }
	            angular.forEach($scope.personalDetails, function (personalDetails) {
	                personalDetails.selected = $scope.selectedAll;
	            });
	        };
	}]);
        </script>

        <form>
            <div>

                <button id="submit" name="submit" class="btn btn-primary" value="1" style="background-color:deepskyblue;margin-left:20%;margin-right:60%;display:block;margin-top:22%;margin-bottom:0%">Save</button>

                <button id="cancel" name="cancel" class="btn btn-primary" value="1" style="background-color:deepskyblue;margin-left:35%;margin-right:50%;margin-top:-9%;">Cancel</button>
            </div>


        </form>
    </div>
</div>


